{
  "hash": "3eeb884bc8d510214d2a141772084559",
  "result": {
    "engine": "knitr",
    "markdown": "---\nformat: \n  revealjs:\n    theme: [night, ../custom.scss]\n    highlight-style: monokai\nfooter: '<a href=\"/lectures/overview.qmd\">{{< fa house >}}</a>'\nslide-number: c/t\n---\n\n\n## Literate programming with `Rmarkdown` {.title-slide}\n\n\n<img src=\"../images/rmarkdown.png\"></img>\n\n## {.center-slide}\n\n![[Artwork by @allison_horst](https://twitter.com/allison_horst)](../images/horst/rmarkdown-band.png)\n\n\n## Examples\n\nSee [rmarkdown.rstudio.com/gallery](https://rmarkdown.rstudio.com/gallery.html)\n\n## {background-iframe=\"https://rstudio.github.io/tufte/?_gl=1*tp3wgz*_ga*MTAzMDI4ODU3LjE3MzEyMDYwNTE.*_ga_2C0WZ1JHG0*MTczMTIxMzk1Ni4yLjEuMTczMTIxMzk2My4wLjAuMA..\"}\n\n\n\n\n## Rmarkdown `.Rmd` file {.smaller}\n\n\n:::: {.columns}\n\n::: {.column width=66%}\n\n\n::: {.cell}\n\n```{.markdown .cell-code  code-line-numbers=\"1-22|1-5|10-12,17-19|7-8,14|1-22\"}\n    ---\n    title: \"Cars analysis\"\n    output: html_document\n    date: \"2024-11-10\"\n    ---\n      \n    ## Introduction\n    Here are the first few lines of the `cars` dataset:\n\n    ```{r cars}\n    summary(cars)\n    ```\n\n    There are `r nrow(cars)` in total. You can also embed plots, for example:\n\n    ```{r scatterplot, echo=FALSE}\n    plot(cars)\n    ```\n\n```\n:::\n\n:::\n\n::: {.column width=34%}\n\n### Contents\n1. YAML header\n1. R code chunks\n1. Formatted text\n\n:::\n\n::::\n\n\n## Output\n\n![cars-analysis.html](../images/cars-analysis-html.png)\n\n\n## Mini-Exercise {.smaller}\n\n::: {.clock}\n\n{{< fa clock >}} 3 minutes\n\n:::\n\n### Create and run a new Rmarkdown file\n\n:::: {.columns}\n\n::: {.column width=34%}\n\n<iframe style=\"width:100%;max-width:360px;height:360px;\" src=\"https://stopwatch-app.com/widget/timer?theme=dark&color=yellow&hrs=0&min=3&sec=0\" frameborder=\"0\"></iframe>\n\n:::\n\n::: {.column width=66%}\n\n1. In RStudio, open a new file by clicking ![](../images/new-file.png)\n\n1. Select ![](../images/new-rmd-file.png) R Markdown...\n\n1. Enter a **Title** and **Author** then click OK \n\n1. Click ![](../images/knit-button.png) to knit the file (you will be prompted to save the file---save it in your Exercises folder)\n\n1. Examine the rendered output\n\n:::\n\n::::\n\n\n\n## Under the hood\n\n![[Rmarkdown Cookbook](https://bookdown.org/yihui/rmarkdown-cookbook/)](../images/rmarkdown-how-it-works.png)\n\n\n## Output\n\n![cars-analysis.docx](../images/cars-analysis-word.png)\n\n## Output\n\n![cars-analysis.pdf](../images/cars-analysis-html.png)\n\n\n## Text formatting {.smaller}\n\n:::: {.columns}\n::: {.column}\n### Rmarkdown syntax\n:::\n::: {.column}\n### Output\n:::\n::::\n\n. . . \n\n:::: {.columns}\n::: {.column}\n\\*italic\\* or \\_italic\\_\n:::\n::: {.column}\n*italic*\n:::\n::::\n\n. . . \n\n:::: {.columns}\n::: {.column}\n\\*\\*bold\\*\\* or \\_\\_bold\\_\\_\n:::\n::: {.column}\n**bold**\n:::\n::::\n\n. . . \n\n:::: {.columns}\n::: {.column}\nsuperscript\\^2\\^\n:::\n::: {.column}\nsuperscript^2^\n:::\n::::\n\n. . . \n\n:::: {.columns}\n::: {.column}\nsubscript\\~2\\~\n:::\n::: {.column}\nsubscript~2~\n:::\n::::\n\n. . . \n\n:::: {.columns}\n::: {.column}\n\\# Level 1 header\n:::\n::: {.column}\n<span style = \"font-size: 1.2em; font-weight: 600\">Level 1 header</span>\n:::\n::::\n\n. . . \n\n:::: {.columns}\n::: {.column}\n\\#\\# Level 2 header\n:::\n::: {.column}\n<span style = \"font-size: 1.1em; font-weight: 600\">Level 2 header</span>\n:::\n::::\n\n. . . \n\n:::: {.columns}\n::: {.column}\n\\#\\#\\# Level 3 header\n:::\n::: {.column}\n<span style = \"font-size: 1.0em; font-weight: 600\">Level 3 header</span>\n:::\n::::\n\n. . . \n\n:::: {.columns}\n::: {.column}\n\\>Stand out quote\n:::\n::: {.column}\n>Stand out quote\n:::\n::::\n\n## Lists {.smaller}\n\n:::: {.columns}\n::: {.column}\n### Rmarkdown syntax\n:::\n::: {.column}\n### Output\n:::\n::::\n\n. . . \n\n:::: {.columns}\n::: {.column}\n\\* Bullet\n\n\\* Point\n\n\\* list\n:::\n::: {.column}\n* Bullet\n* Point\n* list\n:::\n::::\n\n. . . \n\n<br>\n\n:::: {.columns}\n::: {.column}\n1\\. Numbered\n\n1\\. List\n\n1\\. Items\n:::\n::: {.column}\n1. Numbered\n1. List\n1. Items\n:::\n::::\n\n\n## Links and images {.smaller}\n\n:::: {.columns}\n::: {.column}\n### Rmarkdown syntax\n:::\n::: {.column}\n### Output\n:::\n::::\n\n. . . \n\n:::: {.columns}\n::: {.column}\n\\[click here\\]\\(http://google.com\\)\n:::\n::: {.column}\n[click here](http://google.com)\n:::\n::::\n\n. . . \n\n<br>\n\n:::: {.columns}\n::: {.column}\n\\!\\[cars-analysis.html\\]\\(../images/cars-analysis-html.png\\)\n:::\n::: {.column}\n![cars-analysis.html](../images/cars-analysis-html.png)\n:::\n::::\n\n\n## Mini-Exercise {.smaller}\n\n::: {.clock}\n\n{{< fa clock >}} 5 minutes\n\n:::\n\n### Practice text formatting\n\nEdit the file `exercises/5-rmarkdown/poem-exercise.Rmd` to generate the output on the right\n\n:::: {.columns}\n\n::: {.column width=34%}\n\n<iframe style=\"width:100%;max-width:360px;height:360px;\" src=\"https://stopwatch-app.com/widget/timer?theme=dark&color=yellow&hrs=0&min=5&sec=0\" frameborder=\"0\"></iframe>\n\n:::\n\n::: {.column width=66%}\n\n![](../images/clancy-target-output.png)\n\n:::\n\n::::\n\n\n## YAML Header {.smaller}\n\n### Yet Another Markdown Language\n\n::: {.cell}\n\n```{.markdown .cell-code}\n    ---\n    title: \"Cars analysis\"\n    output: html_document\n    date: \"2024-11-10\"\n    ---\n```\n:::\n\n<br>\n\n::: {.incremental}\n\n* Controls whole-document settings\n\n* key-value pairs\n\n* `output: html_document`\n\n* `output: word_document`\n\n* `output: pdf_document`\n\n:::\n\n<br>\n\n\n## YAML Nested Keys\n\n:::: {.columns}\n\n::: {.column width=45%}\n\n\n::: {.cell}\n\n```{.markdown .cell-code}\n    output: \n      html_document:\n        toc: true\n        toc_float: true\n        code_folding: hide\n        theme: united\n\n```\n:::\n\n\n:::\n\n::: {.column width=55%}\n   \n![](../images/rmarkdown-yaml-example.png)\n\n:::\n\n::::\n\n\n## Inline R code\n\n* Insert values of R objects inline in text\n* Useful for quick calculations\n\n\n::: {.cell}\n\n```{.markdown .cell-code}\n    Average speed was `r mean(cars$speed)`mph.\n```\n:::\n\n\nAverage speed was 15.4mph.\n\n\n\n## Code chunks {.smaller}\n\n\n::: {.cell}\n\n```{.markdown .cell-code}\n    ```{r scatterplot, echo=FALSE}\n    \n    plot(cars)\n    \n    ```\n\n```\n:::\n\n<br>\n\n::: {.incremental}\n\n* Click ![](../images/embed.png) to add\n* Starts and ends with triple backticks ` ``` `\n* `{r}` indicates the language is R\n* `{r scatterplot}` indicates the chuck name is **scatterplot** (not essential by useful for readability and troubleshooting)\n* `echo=FALSE` a chunk option meaning don't print the code to the output\n::: \n\n\n## Chunk options {.smaller}\n\n:::: {.columns}\n\n::: {.column width=34%}\n### Option\n:::\n\n::: {.column width=66%}\n### Meaning\n:::\n\n::::\n\n. . . \n\n:::: {.columns}\n\n::: {.column width=34%}\n`echo=FALSE`\n:::\n\n::: {.column width=66%}\nShow code in output document (TRUE/FALSE)\n:::\n\n::::\n\n. . . \n\n:::: {.columns}\n\n::: {.column width=34%}\n`eval=FALSE`\n:::\n\n::: {.column width=66%}\nRun code in the chunk (TRUE/FALSE)\n:::\n\n::::\n\n. . . \n\n:::: {.columns}\n\n::: {.column width=34%}\n`include=FALSE`\n:::\n\n::: {.column width=66%}\nInclude code in the chunk (TRUE/FALSE)\n:::\n\n::::\n\n. . . \n\n:::: {.columns}\n\n::: {.column width=34%}\n`message=FALSE`\n:::\n\n::: {.column width=66%}\nDisplay code messages in document (TRUE/FALSE)\n:::\n\n::::\n\n. . . \n\n:::: {.columns}\n\n::: {.column width=34%}\n`warning=FALSE`\n:::\n\n::: {.column width=66%}\nDisplay code warnings in document (TRUE/FALSE)\n:::\n\n::::\n\n. . . \n\n:::: {.columns}\n\n::: {.column width=34%}\n`fig.width=7`\n:::\n\n::: {.column width=66%}\nFigure width in inches\n:::\n\n::::\n\n. . . \n\n:::: {.columns}\n\n::: {.column width=34%}\n`fig.height=7`\n:::\n\n::: {.column width=66%}\nFigure height in inches\n:::\n\n::::\n\n## Global options\n\nUse `knitr::opts_chunk$set()` to set global options\n\n::: {.cell}\n\n```{.markdown .cell-code}\n    ```{r, setup, include=FALSE}\n    knitr::opts_chunk$set(\n      echo = FALSE, fig.width = 5, fig.height = 7\n    )\n    ```\n```\n:::\n\n. . . \n\n<br>\n\n::: {.incremental}\n\n* Has to go inside an R code chunk\n* Individual code chunks can have different settings\n\n:::\n\n\n## Parameters \n\n>Parameterised reports allow you to reuse a report template across multiple similar scenarios\n\n::: {.incremental}\n\n* Generate reports for a specific time period\n\n* Generate the same report for different Local Health Districts\n\n* Repeat your whole analysis using a different definition of your exposure variable\n\n:::\n\n\n## Parameters example \n\n:::: {.columns}\n\n::: {.column width=50%}\n\n::: {.cell}\n\n```{.markdown .cell-code  code-line-numbers=\"1-22|4-6|5,9|6,11-13\"}\n    ---\n    title: \"Parameters Example\"\n    output: html_document\n    params: \n      date: \"November 22nd 2024\"\n      dataset: !r cars\n    ---\n\n    The date is `r params$date`\n\n    ```{r}\n    head(params$dataset)\n    ```\n\n```\n:::\n\n:::\n\n::: {.column width=50%}\n\n![](../images/parameters-example.png)\n\n:::\n\n::::\n\n. . . \n\n* Note `dataset: !r cars` defines the parameter 'dataset' to be an R object, rather than the string **\"cars\"**\n\n## Workflow and tips {.smaller}\n\n::: {.incremental}\n\n* Write in your `.Rmd` file but regularly click ![](../images/knit-button.png) knit and preview your file\n\n* Use global code chunk options to suppress code and warnings that you don't want the reader to see (`echo=FALSE`, `warning=FALSE` etc)\n\n* Separate code to generate figures into separate `.R` files then read into `.Rmd` using `![](my-chart.png)` syntax\n\n:::\n\n\n## Mini-Exercise {.smaller}\n\n::: {.clock}\n\n{{< fa clock >}} 15 minutes\n\n:::\n\n### Update a parameterised R Markdown Powerpoint slide deck\n\n:::: {.columns}\n\n::: {.column width=34%}\n\n<iframe style=\"width:100%;max-width:360px;height:360px;\" src=\"https://stopwatch-app.com/widget/timer?theme=dark&color=yellow&hrs=0&min=15&sec=0\" frameborder=\"0\"></iframe>\n\n:::\n\n::: {.column width=66%}\n\n1. Open the file `my-presentation.Rmd` in the folder `Exercises/5-rmarkdown`\n\n1. Edit the YAML header to generate a powerpoint output instead of HTML (see [here](https://bookdown.org/yihui/rmarkdown/output-formats.html#output-formats) for a list of output format names)\n\n1. Add an additional slide showing the figure on self assessed health\n\n1. Update the `date` parameter to print the latest set of figures. \n\n:::\n\n::::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}