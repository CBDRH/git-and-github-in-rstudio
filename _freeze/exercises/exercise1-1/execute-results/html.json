{
  "hash": "2746ac257e5cffc55d33c5f12d107da9",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Getting started\"\nformat: \n  html:\n    execute:\n      echo: true\n      eval: false \n\n---\n\n\n\n# The End Goal\n\nLet's start with the goal in mind! Here it is---a 100% stacked bar chart showing the breakdown of self-rated health status for 8 states and territories.\n\n![](../images/self-assessed-health.png)\n\nThe simple chart format is enhanced using techniques covered in this workshop.\n\n* **Ordering** The states and territories on the y-axis are ordered from top to bottom by the proportion of respondents describing their health status as Very good or Excellent. \n* **Colour** The chart uses a familiar traffic-light colour scheme, to distinguish between <span style=\"color: #D7191C;\">Poor</span> and <span style=\"color: #1A9641;\">Excellent</span> self-assessed health.\n* **Text hierarchy** The main chart title is an informative title highlighting the key message. A descriptive subtitle explains in more detail what is plotted in the chart while the data source is provided in the footnote. \n* **Annotation** Text annotations indicate the percentage response for each category. Note that the colour for these labels has been carefully chosen to contrast against the background colour and the labels have been suppressed for the 'Poor' category, to avoid overflow.\n* **Story telling** As well as having an informative chart title, the keywords <span style=\"color: #1A9641; font-weight: 600;\">Excellent</span> and <span style=\"color: #A6D96A; font-weight: 600;\">Very Good</span> are emphasised with bold font and appropriate colours to help connect the title to the data and reinforce the message.\n\n# The data\n\nThe data for this plot come from the National Health Survey (NHS) 2022, a face-to-face interview survey conducted by the Australian Bureau of Statistics (ABS) and designed to collect information on health behaviours, conditions prevalence, and risk factors in Australia. You can read more about the survey on the ABS website [here](https://www.abs.gov.au/statistics/health/health-conditions-and-risks/national-health-survey/latest-release).\n\nThese data are openly available for download in `.xlsx` format from the [ABS website](https://www.abs.gov.au/statistics/health/health-conditions-and-risks/national-health-survey/2022/NHSDC02.xlsx) and a copy is also included in the workshop repo in the file `national-health-survey-2022-table-2.xlsx`.    \n\n# Aims\n\nIn this exercise you will use `dplyr` and other tools to read-in and clean the self-assessed health data from the National Health Survey. The raw data is the `.xlsx` file downloaded from the ABS data. The final output will be a tidy data file in `.csv` and `.Rda` format. Essentially, we will use code to go...\n\n\n:::: {.column-page}\n\n::: {layout-ncol=2}\n\n**From this messy excel sheet**\n\n**To this tidy dataframe!** \n\n![](../images/figure1-raw-data-screenshot.png)\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-31c946d4dc7128f4c3b4\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-31c946d4dc7128f4c3b4\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\"],[\"Poor\",\"Fair\",\"Good\",\"Very good\",\"Excellent\",\"Poor\",\"Fair\",\"Good\",\"Very good\",\"Excellent\",\"Poor\",\"Fair\",\"Good\",\"Very good\",\"Excellent\",\"Poor\",\"Fair\",\"Good\",\"Very good\",\"Excellent\",\"Poor\",\"Fair\",\"Good\",\"Very good\",\"Excellent\",\"Poor\",\"Fair\",\"Good\",\"Very good\",\"Excellent\",\"Poor\",\"Fair\",\"Good\",\"Very good\",\"Excellent\",\"Poor\",\"Fair\",\"Good\",\"Very good\",\"Excellent\"],[\"Australian Capital Territory\",\"Australian Capital Territory\",\"Australian Capital Territory\",\"Australian Capital Territory\",\"Australian Capital Territory\",\"New South Wales\",\"New South Wales\",\"New South Wales\",\"New South Wales\",\"New South Wales\",\"Northern Territory\",\"Northern Territory\",\"Northern Territory\",\"Northern Territory\",\"Northern Territory\",\"Queensland\",\"Queensland\",\"Queensland\",\"Queensland\",\"Queensland\",\"South Australia\",\"South Australia\",\"South Australia\",\"South Australia\",\"South Australia\",\"Tasmania\",\"Tasmania\",\"Tasmania\",\"Tasmania\",\"Tasmania\",\"Victoria\",\"Victoria\",\"Victoria\",\"Victoria\",\"Victoria\",\"Western Australia\",\"Western Australia\",\"Western Australia\",\"Western Australia\",\"Western Australia\"],[3.4,8.699999999999999,26.9,41.9,19.2,3.5,10.6,29.3,34.7,21.9,2.9,9.699999999999999,31.6,33.1,22.4,3.7,12.6,28.2,37.7,17.8,3.3,12.6,28,35.5,20.4,5.1,12.2,29.8,34.4,18.7,3,8.9,26,38.8,22.7,3,9.300000000000001,31.4,36.2,20.4]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>status<\\/th>\\n      <th>state<\\/th>\\n      <th>percent<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"pageLength\":7,\"searching\":false,\"lengthChange\":false,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":3},{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"status\",\"targets\":1},{\"name\":\"state\",\"targets\":2},{\"name\":\"percent\",\"targets\":3}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n:::\n\n:::: \n\n::: {.callout-tip}\n\n## Tidy data \n\nRemember, in a tidy dataset:\n\n1. Each variable is a column; each column is a variable.\n1. Each observation is a row; each row is an observation.\n1. Each value is a cell; each cell is a single value.\n\nIf you examine the output above you will see this is true for the clean data: there are three columns, and each column is a variable: status, state, and percent. Each row is an observation, telling us the per cent for every state and status combination. Finally, each cell is a single value---there are no merged cells. \n\nNone of these rules of tidy datasets hold for the original `.xlsx` file!\n\n[R for Data Science (2nd Edition)](https://r4ds.hadley.nz/data-tidy.html)\n\n:::\n\n\n# How to complete this exercise\n\nThis first exercise is fully guided---just follow the data cleaning steps and copy-paste the code snippets into your own code file to build up a working data cleaning pipeline. \n\nNote that some steps are incremental, for example Step 6 provides code to filter data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Filter to these rows\ndf1Clean <- df1Raw |>\n  filter(X %in% healthStatus)\n```\n:::\n\n\nIn the next step, Step 7, you are given code to select certain variables.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Append this line to the previous code using |>\nselect(c(X, ends_with(\".1\"), -'Australia.1'))\n```\n:::\n\n\nBut note the comment:\n\n> Append this line to the previous code using |>\n\nThis means that you should append the code in Step 7 to the previous code in Step 6 using the `|>` operator to connect the two. So after you complete Step 7 the code in your file will look like this:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Filter to these rows\ndf1Clean <- df1Raw |>\n  filter(X %in% healthStatus) |> \n  select(c(X, ends_with(\".1\"), -'Australia.1'))\n```\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<link href=\"../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/datatables-binding-0.33/datatables.js\"></script>\n<script src=\"../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js\"></script>\n<link href=\"../site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}